This is a [Next.js](https://nextjs.org/) project bootstrapped with [`create-next-app`](https://github.com/vercel/next.js/tree/canary/packages/create-next-app).

## Getting Started

### Installing the project

- The project uses React 17 with Next.JS so make sure to have the current version of Node installed (18 when those lines are written). To do that you can use `fnm` with the following command : `fnm install 18; fnm use 18;`
- You will need to setup a local environment with a postgresql database.
  - First, let's install [Postgresql](https://www.postgresql.org/download/) if you haven't installed it yet.
  - (Recommended) Install [DB Lens](https://dblens.app/)
  - Add psql to your path by adding this line to your .zshrc or .bashrc (or whatever is your terminal config file) : `export PATH=$PATH:/Library/PostgreSQL/14/bin`(don't forget to change the 14 if the version of postgres you installed is not 14)
  - Either use `source .zshrc` or quit and relaunch your terminal
  - Connect with the postgres user by entering `sudo -i -u postgres`in your terminal
  - From there, enter `createdb estimator` and enter the password you gave when you installed postgres (the one associated with the postgres user on MacOS)
  - Check that the estimator db exists (you can enter `psql` and then `\l` or use DB Lens)
<br/><br/>

- Cool! We have a database setup but we need to tell the app how to connect to the database. 
  - Please copy the `.env.template` file and rename it to `.env`
  - You'll need to update the `DATABASE_URL=` line with `"postgresql://postgres:{your_postgres_password}@localhost/estimator"` (don't worry, the .env file is ignored by git so your password will not be sent to git)
<br/><br/>

- Now we need to copy the app schema to the estimator database
  - Open up a terminal in VS Code at the root of the project
  - Run `yarn` or `npm install` (from there I'm gonna assume that you're using yarn)
  - Run `yarn prisma:generate`
  - Load the env to your terminal by running `export $(grep -v '^#' .env | xargs)`
  - Run `yarn prisma:push`(Careful! Be sure that you're .env is setup to use the local database or you will erase the production database)
<br/><br/>

- Okay we now have a database with the app schema, so let's run the app ! 
  - Run `yarn dev` and that's it!

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

### Using NextJS
To begin with, you can watch this [video](https://www.youtube.com/watch?v=Sklc_fQBmcs&ab_channel=Fireship) from Fireship that gives an overview of what NextJS is, what problem it solves and how it works in a nutshell. 
The project only uses the SSR strategy that builds pages at request time. So you'll see a lot of `getServerSideProps` being used.  
<br/>Here are a few docs you may want to visit when you're stuck (or right now to discover NextJS):
- [Routing](https://nextjs.org/docs/routing/introduction)
- [API Routes](https://nextjs.org/docs/api-routes/introduction)
- [Data fetching](https://nextjs.org/docs/basic-features/data-fetching/overview)
- [Environment Variables](https://nextjs.org/docs/basic-features/environment-variables)

### Iterating from there :
- Here is the [project's trello](https://trello.com/b/mJX1Ehya/projet-bdc), please ask one of the devs to give you access.
- Here are the [mock-ups](https://whimsical.com/outil-delivery-EAhQr3Pg1wHMdp2d6yLhBy), you also need a permission to access that
- Time to do your first ticket! Good luck and thank you for your contribution on this project.

### NextJS autogenerated ReadME
[API routes](https://nextjs.org/docs/api-routes/introduction) can be accessed on [http://localhost:3000/api/hello](http://localhost:3000/api/hello). This endpoint can be edited in `pages/api/hello.js`.

The `pages/api` directory is mapped to `/api/*`. Files in this directory are treated as [API routes](https://nextjs.org/docs/api-routes/introduction) instead of React pages.
